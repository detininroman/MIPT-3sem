Решение задачи производителя-потребителя с помощью семафоров.
===========================================

* Cемафор **`full`** предназначен для подсчета количества заполненных мест в буфере.
* Семафор **`empty`** предназначен для подсчета количества пустых мест в буфере.
* Семафор **`mutex`** предназначен для предотвращения одновременного доступа к буферу производителя и потребителя.

~~~code
#define N 100             // количество мест в буфере
typedef int semaphore;

semaphore mutex = 1;      // управляет доступом к критической области
semaphore empty = N;      // подсчитывает пустые места в буфере
semaphore full = 0;       // подсчитывает занятые места в буфере 

void producer ()
{
	int item;
	while (true)
	{
		item = produce_item ();
		down (&empty);          // уменьшение счетчика пустых мест
		down (&mutex);          // вход в критическую область
		insert_item (item);     // помещение новой записи в буфер
		up (&mutex);            // выход из критической области
		up (&full);             // увеличение счетчика занятых мест
	}
}

void consumer ()
{
	int item;
	while (true)
	{
		down (&full);           // уменьшение счетчика занятых мест
		down (&mutex);          // вход в критическую область
		item = remove_item ();  // извлечение записи из буфера
		up (&mutex);            // выход из критической области
		up (&empty);            // увеличение счетчика пустых мест
		consume_item (item);    // работа с записью
	}
}
~~~